<!doctype html>
<html lang="es">


<!-- HEAD -->
<%- include('../partials/head') %> 

<body>

<!-- HEADER -->  
  <%- include('../partials/header') %> 

  <main>

    <!-- SECCION NOTICIA -->

    <div class="container">
        <p style="font-size:13px;"><%= new Intl.DateTimeFormat('es-AR').format(new Date(noticia.createdAt)) %></p>
        <hr>
        <h4><%= noticia.titulo %></h4>
    </div>
    <br>

    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <% noticia.images.forEach((image, index) => { %>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="<%= index %>" <% if (index === 0) { %>class="active" aria-current="true"<% } %> aria-label="Slide <%= index + 1 %>"></button>
          <% }); %>
        </div>
        <div class="carousel-inner">
          <% noticia.images.forEach((image, index) => { %>
            <div class="carousel-item <% if (index === 0) { %>active<% } %>">
              <img src="/images/imagesNoticias/<%= image.name %>" class="carruselNoticias mx-auto img-fluid d-block w-100" alt="...">
            </div>
          <% }); %>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <br>

      <!-- texto -->

      <div class="container">
        <div class="row">
            <div class="mx-auto col-xs-12 col-md-6 col-lg-12">
                <p class="textoNoticias"><%= noticia.descripcion %>                    
                </p>
            </div>
        </div>
      </div>

      <% if (noticia.video) { %>

        <div class="container "> 
            <div class="row">
                <div class="mx-auto col-xs-12 col-md-6 col-lg-12">
                    <iframe width="550" height="415" src="https://www.youtube.com/embed/<%= noticia.video ? noticia.video.slice(17) : 'gb5Oek19Kr0' %>" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="videoNoticias"></iframe> 
                </div>
            </div>
          </div>
       
      <% } %>

            <!-- video -->


      <!-- FINALIZA SECCION NOTICIA -->

 <!-- IR ATRAS -->

 <div class="container">
  <div class="row">
    <div class="ms-4 mt-3 col-xs-12 col-md-6 col-lg-3 d-block img-fluid d-flex justify-content-between">
      <a href="/inicio">
        <button class="btn btn-primary" onclick="history.back()">
            <i class="fas fa-arrow-left"></i> Inicio
          </button>
      </a>

      <% if (locals.userLogin) { %>
        <% if (locals.userLogin.rol === 1 || locals.userLogin.rol === 2 || locals.userLogin.rol === 3) { %>
      <a href="/noticias/edit/<%= noticia.id %>">
        <button class="btn btn-success" onclick="history.back()">
          <i class="fa fa-edit"></i> Editar
          </button>
      </a>

      <!-- Button trigger modal -->
      <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
        <i class="fa fa-trash"></i> Borrar
      </button>

      <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">¡ATENCION!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
       ¿Estas seguro de que quieres eliminar esta noticia?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
        <form action="/noticias/delete/<%= noticia.id %>?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-danger">
            <i class="fa fa-trash"></i> Si, Borrar
           </button>
        </form>
      </div>
    </div>
  </div>
</div>


      <% } %>
      <% } %>  
    </div>
  </div>
   
  </div>
  </main>

<!--LOGOS COLABORADORES-->

<%- include('../partials/colab') %> 


  </main>

 <!-- FOOTER -->

 <%- include('../partials/footer') %> 


 <!-- SCRIPTS DE EFECTOS/BOOTSTRAP5 -->

<%- include('../partials/scripts') %> 

<script>
  const iconInicio = document.getElementById('iconInicio')
  iconInicio.addEventListener('error', () => {
    iconInicio.src='https://cdn-icons-png.flaticon.com/512/149/149071.png'
  })
</script>

</body>
</html>